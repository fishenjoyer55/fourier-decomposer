<!DOCTYPE html>
<html lang="en">
    <link rel="stylesheet" href="styles.css">
    <head>
        <title>Fourier Decomposer</title>
    </head>
    <body>
        <div class="big">
            <div class="inputs">
                <label for="audioFileInput" class="btn">Select File</label>
                <input style="display:none;" type="file" id="audioFileInput" accept="audio/*">
                <button class="btn" id="record" onclick="recordAudio()">Record Audio</button>
            </div>

            <audio id="localAudio" controls></audio>

        <div>
        <div id="canvasZone">
            <canvas id="wholeAudioCanvas" class="waveCanvas" width="1000" height="200"></canvas>
            <div class = "separator">
                <button class="btn" id="decompose" onclick="decompose()">Decompose!</button>
            </div>
            <canvas id="frequencyCanvas" class="waveCanvas" width="1000" height="300"></canvas>
            <canvas id="sinusoidCanvas0" class="waveCanvas" class="sinusoidCanvas" width="1000" height="80"></canvas>
            <canvas id="sinusoidCanvas1" class="waveCanvas" class="sinusoidCanvas" width="1000" height="80"></canvas>
            <canvas id="sinusoidCanvas2" class="waveCanvas" class="sinusoidCanvas" width="1000" height="80"></canvas>
            <div class="separator">
                <input type="number" id="isolateRange" placeholder="0" width = "500">
                <button class="btn" id="includeExclude" onclick="toggleIncludeExclude()">Exclude</button>
                <p id="explainer" class="misctext">Input an audio and press "decompose" before continuing to this part.</p>
                <button class="btn" id="reconstruct" onclick="reconstruct()">Reconstruct!</button>
            </div>
            <canvas id="reconstructionCanvas" class="waveCanvas" width="1000" height="200"></canvas>
        </div>
        <div id="toolshrimps">
            <span id="toolshrimp0" class="toolshrimp">
                <img src="sprites/toolshrimp.png" class="toolshrimp" width="50" height="50">
                <span>
                    <p class="toolshrimptext">Select an mp3 audio (recommended: https://online-voice-recorder.com/) or record one (only if your mic is good) to start. Try to keep it between 1 and 5 seconds.</p>
                </span>
            </span>
            <span id="toolshrimp1" class="toolshrimp">
                <img src="sprites/toolshrimp.png" class="toolshrimp" width="50" height="50">
                <span>
                    <p class="toolshrimptext">Pressure vs. time graph. The higher the amplitude, the louder the sound. Every wave, including this one, can be represented as a sum of sinusoids of various amplitudes, frequencies, and phase.</p>
                </span>
            </span>
            <span id="toolshrimp2" class="toolshrimp">
                <img src="sprites/toolshrimp.png" class="toolshrimp" width="50" height="50">
                <span>
                    <p class="toolshrimptext">Magnitude vs. frequency graph. This was generated by running your sound wave through a Fourier transform. Lower frequencies are on the left, higher frequencies are on the right, and the height at some frequency represents its magnitude.</p>
                </span>
            </span>
            <span id="toolshrimp3" class="toolshrimp">
                <img src="sprites/toolshrimp.png" class="toolshrimp" width="50" height="50">
                <span>
                    <p class="toolshrimptext">From top to bottom, these are the three strongest frequencies in your sound wave, stretched by a factor of 100 (otherwise they oscillate too fast to distinguish). Looks best with low-middle frequencies; high frequencies may produce strange graphs.</p>
                </span>
            </span>
            <span id="toolshrimp4" class="toolshrimp">
                <img src="sprites/toolshrimp.png" class="toolshrimp" width="50" height="50">
                <span>
                    <p class="toolshrimptext">Reconstructed sound wave, generated by running the Fourier transform through an inverse Fourier transform. If you made any inclusions/exclusions, listen closely for what's different.</p>
                </span>
            </span>
            <span id="toolshrimp5" class="toolshrimp">
                <img src="sprites/toolshrimp.png" class="toolshrimp" width="50" height="50">
                <span>
                    <p class="toolshrimptext">Fish tend to live under the waves?</p>
                </span>
            </span>
        </div>
        <div id=axes>

        </div>
        <div id="jellyfishHabitat">
            <div id="jellyfishBackground"></div>
            <canvas id="jellyfishAquarium" width="1660" height="670"></canvas>
            <div id="blackout"></div>
        </div>
        <img src="sprites/spanner.png" id="spanner1" width="100%" height="20px">
        <img src="sprites/spanner.png" id="spanner2" width="100%" height="20px">
        <p id="credits" class="misctext">Made by Joshua Pun and Gavin Ruan. https://github.com/fishenjoyer55/fourier-decomposer/</p>
    </body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="fastFourierTransformer.js"></script>
    <script src="main.js"></script>
</html>